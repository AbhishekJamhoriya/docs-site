(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{460:function(e,t,s){e.exports=s.p+"assets/img/zOSMF-HA.b1722523.png"},701:function(e,t,s){"use strict";s.r(t);var r=s(18),a=Object(r.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"configuring-z-osmf-for-high-availability-in-sysplex"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#configuring-z-osmf-for-high-availability-in-sysplex"}},[e._v("#")]),e._v(" Configuring z/OSMF for high availability in Sysplex")]),e._v(" "),r("p",[e._v("z/OSMF high availability (HA) should be configured in Hot Standby mode to ensure availability of REST services. The goal of this configuration is to ensure that one z/OSMF server is always available to provide the REST services.")]),e._v(" "),r("p",[e._v("In Hot Standby mode, there is at least one backup (hot-standby) server and a preferred target server. Both targets are active, and both z/OSMF servers are bound to the DVIPA. The preferred z/OSMF server receives all new incoming requests. When the preferred z/OSMF server fails or the system becomes down, new requests are routed to the backup (hot-standby) server. The distributing DVIPA does not perform load balancing of requests across multiple systems. For more information, read the following articles in IBM Documentation:")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.ibm.com/docs/en/zos/2.2.0?topic=environment-configuring-zosmf-availability",target:"_blank",rel:"noopener noreferrer"}},[e._v("Configuring z/OSMF for availability"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.ibm.com/docs/en/zos/2.4.0?topic=configurations-configuring-zosmf-high-availability",target:"_blank",rel:"noopener noreferrer"}},[e._v("Configuring z/OSMF for high availability"),r("OutboundLink")],1)])]),e._v(" "),r("h2",{attrs:{id:"sysplex-environment-requirements"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#sysplex-environment-requirements"}},[e._v("#")]),e._v(" Sysplex environment requirements")]),e._v(" "),r("p",[e._v("Before you begin, ensure that the Sysplex environment meets the following requirements for z/OSMF REST services:")]),e._v(" "),r("ul",[r("li",[e._v("Shared SAF database. See "),r("a",{attrs:{href:"https://www.ibm.com/docs/en/zos/2.1.0?topic=sd-sharing-database-sysplex-communication-in-data-sharing-mode",target:"_blank",rel:"noopener noreferrer"}},[e._v("Sharing a database with sysplex communication in data sharing mode"),r("OutboundLink")],1),e._v(" in IBM Documentation.")]),e._v(" "),r("li",[e._v("USS Shared file system. See "),r("a",{attrs:{href:"https://www.ibm.com/docs/en/zos/2.4.0?topic=planning-sharing-file-systems-in-sysplex",target:"_blank",rel:"noopener noreferrer"}},[e._v("How to share file systems in a Sysplex"),r("OutboundLink")],1),e._v(" in IBM Documentation.")]),e._v(" "),r("li",[e._v("JESPlex/JES2 Multi-Access Spool (MAS) environment")]),e._v(" "),r("li",[e._v("Sysplex distributor, configured Dynamic VIPA TCP/IP address")]),e._v(" "),r("li",[e._v("Extended MCS console (EMCS)")])]),e._v(" "),r("h2",{attrs:{id:"setting-up-z-osmf-nucleus"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-z-osmf-nucleus"}},[e._v("#")]),e._v(" Setting up z/OSMF nucleus")]),e._v(" "),r("p",[r("strong",[e._v("This information is intended for a first-time z/OSMF setup.")]),e._v(" Follow these high-level steps to create a z/OSMF nucleus on your system.")]),e._v(" "),r("p",[e._v("For detailed information about each step, see "),r("a",{attrs:{href:"https://www.ibm.com/support/knowledgecenter/SSLTBW_2.4.0/com.ibm.zos.v2r4.izua300/izulite_CreateTheNucleus.htm",target:"_blank",rel:"noopener noreferrer"}},[e._v("Create a z/OSMF nucleus on your system"),r("OutboundLink")],1),e._v(" in IBM Documentation.")]),e._v(" "),r("ol",[r("li",[r("p",[e._v("Create the z/OSMF security authorizations by running the sample JCL "),r("strong",[e._v("SYS1.SAMPLIB(IZUSEC)")]),e._v(". z/OSMF security authorizations will be used by all z/OSMF servers across multiple systems.")])]),e._v(" "),r("li",[r("p",[e._v("Create a shared file system per z/OSMF server by running the sample JCL "),r("strong",[e._v("SYS1.SAMPLIB(IZUMKFS)")]),e._v(". It holds configuration settings and the persistence data.")])]),e._v(" "),r("li",[r("p",[e._v("Copy the Sample Parmlib Member "),r("strong",[e._v("SYS1.SAMPLIB(IZUPRM00)")]),e._v(" to PARMLIB and modify it according to "),r("a",{attrs:{href:"#requirements-of-zosmf-ha-parmlib-member-in-sysplex"}},[e._v("requirements of z/OSMF HA parmlib member in Sysplex")]),e._v(". Each system uses a different IZUPRMxx member. For example, IZUPRM0A and IZUPRM0B.")])]),e._v(" "),r("li",[r("p",[e._v("Copy the following z/OSMF procedures from "),r("strong",[e._v("SYS1.PROCLIB")]),e._v(" into your JES concatenation:")]),e._v(" "),r("ul",[r("li",[e._v("IZUSVR1  (Each z/OSMF server should use the different started procedure. For example, IZUSVRA and IZUSVRB.)")]),e._v(" "),r("li",[e._v("IZUANG1")]),e._v(" "),r("li",[e._v("IZUFPROC")])])]),e._v(" "),r("li",[r("p",[e._v("Define different STARTED profiles for z/OSMF servers.")])])]),e._v(" "),r("h3",{attrs:{id:"requirements-of-z-osmf-ha-parmlib-member-in-sysplex"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#requirements-of-z-osmf-ha-parmlib-member-in-sysplex"}},[e._v("#")]),e._v(" Requirements of z/OSMF HA parmlib member in Sysplex")]),e._v(" "),r("ul",[r("li",[r("p",[r("em",[e._v("AUTOSTART_GROUP")]),e._v(", more than one z/OSMF server (independent z/OSMF instances) is to be autostarted in a Sysplex. For instance, System A will autostart a server and similarly, System B will autostart the second z/OSMF server.")]),e._v(" "),r("p",[e._v("z/OSMF has a default autostart group (IZUDFLT) which is used in monoplex or single z/OS image. To have more z/OSMF servers autostarted in a Sysplex, you must associate each server and the systems it serves with a unique autostart group name. For example, "),r("code",[e._v("AUTOSTART_GROUP('IZUDFLA')")]),e._v(" for System A and "),r("code",[e._v("AUTOSTART_GROUP('IZUDFLB')")]),e._v(" for System B")])]),e._v(" "),r("li",[r("p",[r("em",[e._v("AUTOSTART(LOCAL)")]),e._v(" should be used by all z/OSMF instances.")])]),e._v(" "),r("li",[r("p",[r("em",[e._v("HOSTNAME")]),e._v(", the DVIPA address will be used as the z/OSMF host name for all instances.")])]),e._v(" "),r("li",[r("p",[r("em",[e._v("HTTP_SSL_PORT")]),e._v(", all servers are listening on the same port.")])]),e._v(" "),r("li",[r("p",[r("em",[e._v("KEYRING_NAME")]),e._v(", all servers should use the same key ring such as "),r("code",[e._v("IZUKeyring.IZUDFLT")]),e._v(".")])]),e._v(" "),r("li",[r("p",[r("em",[e._v("SERVER_PROC")]),e._v(", each z/OSMF server should use the different started procedure. For example, IZUSVRA and IZUSVRB.")])]),e._v(" "),r("li",[r("p",[r("em",[e._v("ANGEL_PROC")]),e._v(", all z/OSMF servers can connect to the same z/OSMF angel process such as IZUANG1.")])]),e._v(" "),r("li",[r("p",[r("em",[e._v("SAF_PREFIX")]),e._v(", they should use the same SAF profile prefix such as IZUDFLT.")])]),e._v(" "),r("li",[r("p",[r("em",[e._v("USER_DIR")]),e._v(", each instance uses a shared file system with a unique mount point for each AUTOSTART group that be automatically started. For example, "),r("code",[e._v("/global/zosmf/zosmfa")]),e._v(" and "),r("code",[e._v("/global/zosmf/zosmfb")]),e._v(".")])])]),e._v(" "),r("h2",{attrs:{id:"configuring-z-osmf-for-high-availability"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#configuring-z-osmf-for-high-availability"}},[e._v("#")]),e._v(" Configuring z/OSMF for high availability")]),e._v(" "),r("p",[e._v("The following DVIPA configuration ensures the availability of z/OSMF for Hot-Standby. For example, suppose that you have a Sysplex of two z/OS systems: A, B.")]),e._v(" "),r("ol",[r("li",[r("p",[e._v("Enable dynamic XCF on each host by adding the following TCP/IP definitions:")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("IPCONFIG SYSPLEXROUTING DYNAMICXCF x.x.x.A 255.255.255.0 1")]),e._v(" for SYSA")]),e._v(" "),r("li",[r("code",[e._v("IPCONFIG SYSPLEXROUTING DYNAMICXCF x.x.x.B 255.255.255.0 1")]),e._v(" for SYSB")])])]),e._v(" "),r("li",[r("p",[e._v("Define a dynamic VIPA (DVIPA) for both systems:")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v(" VIPADYNAMIC                                                      \n  VIPADEFINE  255.255.255.0 x.x.x.V\n  VIPADISTRIBUTE DEFINE DISTM HOTSTANDBY x.x.x.V \n    PORT 443 DESTIP\n     x.x.x.A  PREFERRED \n     x.x.x.B  BACKUP                                         \n ENDVIPADYNAMIC\n")])])]),r("p",[e._v("where,")]),e._v(" "),r("ul",[r("li",[e._v("x.x.x.A is the home address for SYSA.")]),e._v(" "),r("li",[e._v("x.x.x.B is the home address for SYSB.")]),e._v(" "),r("li",[e._v("x.x.x.V is Dynamic VIP Address.")])]),e._v(" "),r("p",[r("img",{attrs:{src:s(460),alt:""}})])])]),e._v(" "),r("p",[e._v("The "),r("code",[e._v("VIPADISTRIBUTE")]),e._v(" statement with "),r("code",[e._v("PREFERRED")]),e._v(" and "),r("code",[e._v("BACKUP")]),e._v(" settings is used to enable automatic dynamic VIPA takeover to occur, if needed.")]),e._v(" "),r("p",[e._v("Both z/OSMF servers are bound to the DVIPA x.x.x.V. With both z/OS systems active in the Sysplex, the preferred z/OSMF server, SYSA receives all new incoming requests.\nIf SYSA fails, new work requests for z/OSMF are routed to the server on SYSB. When SYSA resumes normal operations, new work requests for z/OSMF are routed to SYSA again.  This is the default behavior because the "),r("code",[e._v("AUTOSWITCHBACK")]),e._v(" parameter of the "),r("code",[e._v("VIPADISTRIBUTE")]),e._v(" statement is in effect by default.")]),e._v(" "),r("p",[e._v("If you do not want the distributor to switch back to the preferred target when it becomes available, you can specify the "),r("code",[e._v("NOAUTOSWITCHBACK")]),e._v(" parameter for the "),r("code",[e._v("VIPADISTRIBUTE")]),e._v(" statement.")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("VIPADYNAMIC                                                      \n  VIPADEFINE  255.255.255.0 x.x.x.V\n  VIPADISTRIBUTE DEFINE DISTM HOTSTANDBY NOAUTOSWITCHBACK x.x.x.V \n     PORT 443 DESTIP\n        x.x.x.A  PREFERRED \n        x.x.x.B  BACKUP                                         \nENDVIPADYNAMIC\n")])])])])}),[],!1,null,null,null);t.default=a.exports}}]);