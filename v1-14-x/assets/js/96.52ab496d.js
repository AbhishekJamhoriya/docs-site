(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{405:function(e,t,s){"use strict";s.r(t);var a=s(3),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"troubleshooting-z-os-services"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting-z-os-services"}},[e._v("#")]),e._v(" Troubleshooting z/OS Services")]),e._v(" "),s("p",[e._v("The following topics contain information that can help you troubleshoot problems when you encounter unexpected behavior installing and using Zoweâ„¢ z/OS Services.")]),e._v(" "),s("h2",{attrs:{id:"z-osmf-jvm-cache-corruption"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#z-osmf-jvm-cache-corruption"}},[e._v("#")]),e._v(" z/OSMF JVM cache corruption")]),e._v(" "),s("p",[s("strong",[e._v("Symptom:")])]),e._v(" "),s("p",[e._v("When you work with Zowe, there are situations when z/OSMF abends.")]),e._v(" "),s("p",[e._v("The following is a snippet from the Java core dump.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("CEE3DMP V2 R4.0: Condition processing resulted in the unhandled condition.   \n...\n  Condition Information for Active Routines\n    Condition Information for  (DSA address 0000005F026FDE40)\n      CIB Address: 0000005F026FA1E8\n      Current Condition:\n        CEE0198S The termination of a thread was signaled due to an unhandled condition.\n      Original Condition:\n        CEE3250C The system or user abend SDC2  R=4A001620 was issued.\n      Location:\n        Program Unit:  Entry: ntv_createJoinWorkUnit\n        Statement:     Offset: +000ABD14\n      Machine State:\n        ILC..... 0002    Interruption Code..... 000D\n        PSW..... 0785240180000000 000000003825D954\n")])])]),s("p",[s("strong",[e._v("Solution:")])]),e._v(" "),s("p",[e._v("The error occurs when the Java runtime being used by the z/OSMF Liberty server and the Java runtimes being used by Zowe share a user ID of "),s("code",[e._v("IZUSVR1")]),e._v(", which results in a collision. To resolve this issue, review the following steps.")]),e._v(" "),s("ol",[s("li",[s("a",{attrs:{href:"#isolate-the-started-task-user-ids"}},[e._v("Isolate the started task user IDs")])]),e._v(" "),s("li",[s("a",{attrs:{href:"#update-zosmf-to-not-use-jvm-class-caching"}},[e._v("Update z/OSMF to not use JVM class caching")])])]),e._v(" "),s("h3",{attrs:{id:"isolate-the-started-task-user-ids"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#isolate-the-started-task-user-ids"}},[e._v("#")]),e._v(" Isolate the started task user IDs")]),e._v(" "),s("p",[e._v("The z/OSMF started task "),s("code",[e._v("IZUSVR1")]),e._v(" runs under the user ID of "),s("code",[e._v("IZUUSER")]),e._v(".  Before version 1.9 of Zowe, its started task "),s("code",[e._v("ZWESVSTC")]),e._v(" also ran under the same user ID.  With Zowe 1.9, the default configuration changed to use a new user ID of "),s("code",[e._v("ZWESVUSR")]),e._v(" and group of "),s("code",[e._v("ZWEADMIN")]),e._v(".")]),e._v(" "),s("p",[e._v("If your started task "),s("code",[e._v("ZWESVSTC")]),e._v(" is configured to run under the user ID "),s("code",[e._v("IZUUSER")]),e._v(", change it to run under user ID "),s("code",[e._v("ZWESVUSR")]),e._v(". For more information, see "),s("router-link",{attrs:{to:"/user-guide/configure-zos-system.html#user-ids-and-groups-for-the-zowe-started-tasks"}},[e._v("Configuring the z/OS System for Zowe")]),e._v(".")],1),e._v(" "),s("h3",{attrs:{id:"update-z-osmf-to-not-use-jvm-class-caching"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#update-z-osmf-to-not-use-jvm-class-caching"}},[e._v("#")]),e._v(" Update z/OSMF to not use JVM class caching")]),e._v(" "),s("p",[e._v("If you need to run "),s("code",[e._v("ZWESVSTC")]),e._v(" under the same user ID as z/OSMF for your environment, you can update the z/OSMF configuration to switch off shared class caching which stops the crash from occurring.  Disabling shared class caching reduces the performance of z/OSMF so the preferred fix is to change the user ID of  "),s("code",[e._v("ZWESVSTC")]),e._v(" away from "),s("code",[e._v("IZUUSER")]),e._v(" to "),s("code",[e._v("ZWESVUSR")]),e._v(" as described above.")]),e._v(" "),s("p",[e._v("Navigate to the file "),s("code",[e._v("/var/zosmf/configuration/local_override.cfg")]),e._v(".  This contains the startup arguments for the Java runtime used by z/OSMF.  Add the following line:")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("JVM_OPTIONS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("-Xshareclasses:none\n")])])]),s("p",[e._v("You will need to recycle the z/OSMF server running, which by default will be running under the started task "),s("code",[e._v("IZUSVR1")]),e._v(".")]),e._v(" "),s("p",[e._v("For more information on the effect that disabling a shared class cache has on a Java runtime, see "),s("a",{attrs:{href:"https://www.ibm.com/support/knowledgecenter/SSYKE2_8.0.0/com.ibm.java.vm.80.doc/docs/shrc.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Class data sharing"),s("OutboundLink")],1),e._v(" in the IBM Knowledge Center.")]),e._v(" "),s("h2",{attrs:{id:"unable-to-generate-unique-ceatso-apptag"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#unable-to-generate-unique-ceatso-apptag"}},[e._v("#")]),e._v(" Unable to generate unique CeaTso APPTAG")]),e._v(" "),s("p",[s("strong",[e._v("Symptom:")])]),e._v(" "),s("p",[e._v("When you request a Zowe data set or z/OS Files API, you receive a response code 500 - 'Internal Server Error', with a message \"Unable to generate unique CeaTso APPTAG\".")]),e._v(" "),s("p",[s("strong",[e._v("Solution:")])]),e._v(" "),s("p",[e._v("Check z/OSMF settings of REST API of file. You must define "),s("code",[e._v("RESTAPI_FILE")]),e._v(" in IZUPRMxx by the following statement:")]),e._v(" "),s("p",[s("code",[e._v("RESTAPI_FILE ACCT(IZUACCT) REGION(32768) PROC(IZUFPROC)")])]),e._v(" "),s("p",[e._v("The default IZUFPROC can be found in SYS1.PPROCLIB. And the proper authorization is needed to get IZUFPROC work successfully.")]),e._v(" "),s("h2",{attrs:{id:"z-os-services-are-unavailable"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#z-os-services-are-unavailable"}},[e._v("#")]),e._v(" z/OS Services are unavailable")]),e._v(" "),s("p",[e._v("If the z/OS Services are unavailable, take the following corrective actions.")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("Ensure that the z/OSMF REST API services are working. Check the z/OSMF IZUSVR1 task output for errors and confirm that the z/OSMF RESTFILES services are started successfully. If no errors occur, you can see the following message in the IZUSVR1 job output:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("CWWKZ0001I: Application IzuManagementFacilityRestFiles started in n.nnn seconds.\n")])])]),s("p",[e._v("To test z/OSMF REST APIs you can run curl scripts from your workstation.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("curl --user <username>:<password> -k -X GET --header 'Accept: application/json' --header 'X-CSRF-ZOSMF-HEADER: true' \"https://<z/os host name>:<securezosmfport>/zosmf/restjobs/jobs?prefix=*&owner=*\"\n")])])]),s("p",[e._v("where the "),s("em",[e._v("securezosmfport")]),e._v(" is 443 by default. You can verify the port number by checking the "),s("em",[e._v("izu.https.port")]),e._v(" variable assignment in the z/OSMF "),s("code",[e._v("bootstrap.properties")]),e._v(" file.")]),e._v(" "),s("p",[e._v("If z/OSMF returns jobs correctly, you can test whether it is able to returns files by using the following curl scripts:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("curl --user <username>:<password> -k -X GET --header 'Accept: application/json' --header 'X-CSRF-ZOSMF-HEADER: true' \"https://<z/os host name>:<securezosmfport>/zosmf/restfiles/ds?dslevel=SYS1\"\n")])])]),s("p",[e._v("If the restfiles curl statement returns a TSO SERVLET EXCEPTION error, check that the the z/OSMF installation step of creating a valid IZUFPROC procedure in your system PROCLIB has been completed. For more information, see the "),s("a",{attrs:{href:"https://www-01.ibm.com/servers/resourcelink/svc00100.nsf/pages/zOSV2R3sc278419?OpenDocument",target:"_blank",rel:"noopener noreferrer"}},[e._v("z/OSMF Configuration Guide"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("p",[e._v("The IZUFPROC member resides in your system PROCLIB, which is similar to the following sample:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("//IZUFPROC PROC ROOT='/usr/lpp/zosmf'  /* zOSMF INSTALL ROOT     */\n//IZUFPROC EXEC PGM=IKJEFT01,DYNAMNBR=200                          \n//SYSEXEC  DD DISP=SHR,DSN=ISP.SISPEXEC                            \n//         DD DISP=SHR,DSN=SYS1.SBPXEXEC                           \n//SYSPROC  DD DISP=SHR,DSN=ISP.SISPCLIB                            \n//         DD DISP=SHR,DSN=SYS1.SBPXEXEC                           \n//ISPLLIB  DD DISP=SHR,DSN=SYS1.SIEALNKE                           \n//ISPPLIB  DD DISP=SHR,DSN=ISP.SISPPENU                            \n//ISPTLIB  DD RECFM=FB,LRECL=80,SPACE=(TRK,(1,0,1))                \n//         DD DISP=SHR,DSN=ISP.SISPTENU                            \n//ISPSLIB  DD DISP=SHR,DSN=ISP.SISPSENU                            \n//ISPMLIB  DD DISP=SHR,DSN=ISP.SISPMENU                            \n//ISPPROF  DD DISP=NEW,UNIT=SYSDA,SPACE=(TRK,(15,15,5)),            \n//         DCB=(RECFM=FB,LRECL=80,BLKSIZE=3120)                     \n//IZUSRVMP DD PATH='&ROOT./defaults/izurf.tsoservlet.mapping.json'  \n//SYSOUT   DD SYSOUT=H                                              \n//CEEDUMP  DD SYSOUT=H                                              \n//SYSUDUMP DD SYSOUT=H                                              \n//                                                                 \n")])])]),s("p",[s("strong",[e._v("Note:")]),e._v(" You might need to change paths and data sets names to match your installation.")]),e._v(" "),s("p",[e._v("A known issue and workaround for RESTFILES API can be found at "),s("a",{attrs:{href:"http://www-01.ibm.com/support/docview.wss?crawler=1&uid=isg1PI63398",target:"_blank",rel:"noopener noreferrer"}},[e._v("TSO SERVLET EXCEPTION ATTEMPTING TO USE RESTFILE INTERFACE"),s("OutboundLink")],1),e._v(".")])]),e._v(" "),s("li",[s("p",[e._v("Check your system console log for related error messages and respond to them.")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);