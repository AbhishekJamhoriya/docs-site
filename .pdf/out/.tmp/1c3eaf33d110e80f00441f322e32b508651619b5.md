<?xml version="1.0" encoding="UTF-8"?><?workdir /opt/dita-ot/out/.tmp?><?workdir-uri file:/opt/dita-ot/out/.tmp/?><?path2project ../../?><?path2project-uri ../../?><?path2rootmap-uri ../../?><topic xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" xmlns:dita-ot="http://dita-ot.sourceforge.net/ns/201007/dita-ot" class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="zowe-api-mediation-layer-security" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:1;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:1;182:3">Zowe API Mediation Layer Security</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:1;182:3"><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:1;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:1;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:1;182:3"><xref class="- topic/xref " href="#introduction-and-requirements" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:1;182:3">Introduction and requirements</xref></p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:2;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:2;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:2;182:3"><xref class="- topic/xref " href="#transport-level-security" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:2;182:3">Transport-level Security</xref></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:3;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:3;182:3"><xref class="- topic/xref " href="#authentication" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:3;182:3">Authentication</xref></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:4;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:4;182:3"><xref class="- topic/xref " href="#authorization" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:4;182:3">Authorization</xref></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:5;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:5;182:3"><xref class="- topic/xref " href="#types-of-services" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:5;182:3">Types of services</xref></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:6;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:6;182:3"><xref class="- topic/xref " href="#transport-security-requirements" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:6;182:3">Transport Security Requirements</xref></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:7;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:7;182:3"><xref class="- topic/xref " href="#authentication-1" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:7;182:3">Authentication</xref></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:8;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:8;182:3"><xref class="- topic/xref " href="#truststores-and-keystores" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:8;182:3">Truststores and keystores</xref></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:9;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:9;182:3"><xref class="- topic/xref " href="#client-certificates" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:9;182:3">Client Certificates</xref></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:10;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:10;182:3"><xref class="- topic/xref " href="#authentication-to-the-discovery-service" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:10;182:3">Authentication to the Discovery Service</xref></p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:11;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:11;182:3"><xref class="- topic/xref " href="#certificate-management-in-zowe-api-mediation-layer" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:11;182:3">Certificate Management in Zowe API Mediation Layer</xref></p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:3;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:12;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:12;182:3"><xref class="- topic/xref " href="#running-on-localhost" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:12;182:3">Running on localhost</xref></p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:4;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:13;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:13;182:3"><xref class="- topic/xref " href="#how-to-start-apiml-on-localhost-with-full-https" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:13;182:3">How to start APIML on localhost with full HTTPS</xref></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:14;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:14;182:3"><xref class="- topic/xref " href="#certificate-management-script" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:14;182:3">Certificate management script</xref></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:15;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:15;182:3"><xref class="- topic/xref " href="#generating-own-certificates-for-localhost" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:15;182:3">Generating own certificates for localhost</xref></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:16;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:16;182:3"><xref class="- topic/xref " href="#generating-certificate-for-a-new-service-on-localhost" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:16;182:3">Generating certificate for a new service on localhost</xref></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:17;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:17;182:3"><xref class="- topic/xref " href="#add-a-service-with-an-existing-certificate-to-apiml-on-localhost" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:17;182:3">Add a service with an existing certificate to APIML on localhost</xref></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:18;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:18;182:3"><xref class="- topic/xref " href="#login-to-discovery-service-on-localhost" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:18;182:3">Login to Discovery service on localhost</xref></p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:19;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:19;182:3"><xref class="- topic/xref " href="#zowe-runtime-on-zos" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:19;182:3">Zowe runtime on z/OS</xref></p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:5;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:20;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:20;182:3"><xref class="- topic/xref " href="#certificates-for-zos-installation-from-the-zowe-pax-file" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:20;182:3">Certificates for z/OS installation from the Zowe PAX file</xref></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:21;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:21;182:3"><xref class="- topic/xref " href="#import-the-local-ca-certificate-to-your-browser" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:21;182:3">Import the local CA certificate to your browser</xref></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:22;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:22;182:3"><xref class="- topic/xref " href="#generating-keystore-and-truststore-for-a-new-service-on-zos" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:22;182:3">Generating keystore and truststore for a new service on z/OS</xref></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:23;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:23;182:3"><xref class="- topic/xref " href="#add-a-service-with-an-existing-certificate-to-apiml-on-zos" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:23;182:3">Add a service with an existing certificate to APIML on z/OS</xref></p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:6;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:24;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:24;182:3"><xref class="- topic/xref " href="#what-happens-if-the-service-is-not-trusted" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:24;182:3">What happens if the service is not trusted</xref></p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:25;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:25;182:3"><xref class="- topic/xref " href="#trust-zosmf-certificate" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:25;182:3">Trust z/OSMF certificate</xref></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:26;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:26;182:3"><xref class="- topic/xref " href="#disabling-certificate-validation" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:26;182:3">Disabling certificate validation</xref></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:27;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:27;182:3"><xref class="- topic/xref " href="#use-an-existing-server-certificate-for-api-mediation-layer" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:27;182:3">Use an existing server certificate for API Mediation Layer</xref></p></li></ul></li></ul></li></ul></body><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="introduction-and-requirements" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:2;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:2;182:3">Introduction and requirements</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:2;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:28;182:3">The security of the APIML is performed on several levels and are described in following sections.</p></body><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="transport-level-security" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:3;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:3;182:3">Transport-level Security</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:3;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:29;182:3">Data needs to be secured during transport. This is achieved by using the TLS protocol for all connections to APIML services. While disabling the TLS protocol is permitted (e.g. for debugging purposes), the default mode is to have it on.</p></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="authentication" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:4;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:4;182:3">Authentication</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:4;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:30;182:3">Authentication is a way how an entity, whether it be a user (API Client) or an application (API Service), proves its true identity.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:31;182:3">APIML uses two authentication methods:</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:7;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:28;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:32;182:3">user ID and password (and authentication tokens retrieved by using the user ID and password)</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:8;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:29;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:33;182:3">These requests originate from a user.</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:30;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:34;182:3">The user ID and password are validated by a z/OS security manager and
a token is issued that is then used to access the API service.</p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:31;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:35;182:3">TLS client certificates</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:9;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:32;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:36;182:3">These certificates are for service-only requests.</p></li></ul></li></ul><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:37;182:3">In the future, we would like APIML to support client certificates to access the gateway.</p></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="authorization" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:5;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:5;182:3">Authorization</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:5;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:38;182:3">Authorization is a method used to determine access rights of an entity.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:39;182:3">In the APIML, the authorization is done by the z/OS security manager (<xref class="- topic/xref " href="https://www.ca.com/us/products/ca-acf2.html" format="html" scope="external" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:28;182:3">CA ACF2</xref>, <xref class="- topic/xref " href="https://www.ibm.com/support/knowledgecenter/zosbasics/com.ibm.zos.zsecurity/zsecc_042.htm" format="htm" scope="external" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:29;182:3">IBM RACF</xref>, <xref class="- topic/xref " href="https://www.ca.com/us/products/ca-top-secret.html" format="html" scope="external" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:30;182:3">CA Top Secret</xref>). The authentication token is used as proof of valid authentication. The authorization checks, however, are always done by the z/OS security manager.</p></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="types-of-services" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:6;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:6;182:3">Types of services</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:6;182:3"><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:10;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:33;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:40;182:3">Zowe Core services:</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:11;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:34;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:41;182:3">Zowe APIML services:</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:12;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:35;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:42;182:3">Gateway Service (GW)</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:13;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:36;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:43;182:3">The access point for API clients that need to access API services</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:37;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:44;182:3">API Services can be accessed via the gateway by API Clients</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:38;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:45;182:3">Gets information about an API Service from the Discovery Service</p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:39;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:46;182:3">Discovery Service (DS)</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:14;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:40;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:47;182:3">Collects information about API Services and provides it to the Gateway Service and other services</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:41;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:48;182:3">API Mediation services are also registered to the Discovery Service</p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:42;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:49;182:3">API Catalog (AC)</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:15;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:43;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:50;182:3">Displays information about API services in a web UI</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:44;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:51;182:3">Gets information about an API Service from the Discovery Service</p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:45;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:52;182:3">Authentication and Authorization Service (AAS)</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:16;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:46;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:53;182:3">Provides authentication and authorization functionality to check access of users to resources on z/OS</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:47;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:54;182:3">Security service is not provided as an individual microservice but is included to the Gateway Service</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:48;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:55;182:3">For more details, see: <xref class="- topic/xref " href="https://github.com/zowe/api-layer/wiki/Zowe-Authentication-and-Authorization-Service" format="html" scope="external" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:31;182:3">APIML wiki</xref></p></li></ul></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:49;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:56;182:3">Non-APIML Zowe Core services (zLUX, Atlas)</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:17;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:50;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:57;182:3">They are like other regular API Client and Service described below</p></li></ul></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:51;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:58;182:3">API Clients</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:18;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:52;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:59;182:3">API Clients are external applications, users, or other API services that are accessing API services via the API Gateway</p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:53;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:60;182:3">API Services</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:19;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:54;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:61;182:3">API Services are applications that want to be accessed via the API Gateway</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:55;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:62;182:3">They register themselves to the Discovery Service</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:56;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:63;182:3">API Services can always access other services via the API Gateway</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:57;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:64;182:3">API Services can sometimes access other services without the API Gateway (if they are installed in such a way that direct access is possible)</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:58;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:65;182:3">API Services can also be API Clients (when they access other services)</p></li></ul></li></ul></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="transport-security-requirements" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:7;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:7;182:3">Transport Security Requirements</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:7;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:66;182:3">Servers ae required to provide HTTPS ports.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:67;182:3">The requirements for the services are the following:</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:20;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:59;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:68;182:3">API Client</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:21;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:60;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:69;182:3">Is not a server</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:61;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:70;182:3">Needs to trust the API Gateway</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:62;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:71;182:3">Has a truststore that contains certificate(s) needed to trust the API Gateway</p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:63;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:72;182:3">Gateway Service</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:22;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:64;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:73;182:3">Provides an HTTPS port</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:65;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:74;182:3">Has a keystore with a server certificate</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:23;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:66;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:75;182:3">The certificate needs to be trusted by API Clients</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:67;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:76;182:3">This certificate should be trusted by web browsers because the API Gateway can be used to display web UIs</p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:68;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:77;182:3">Has a truststore that contains certificates needed to trust API Services</p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:69;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:78;182:3">API Catalog</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:24;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:70;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:79;182:3">Provides an HTTPS port</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:71;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:80;182:3">Has a keystore with a server certificate</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:25;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:72;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:81;182:3">The certificate needs to be trusted by the API Gateway</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:73;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:82;182:3">This certificate does not need to be trusted by anyone else</p></li></ul></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:74;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:83;182:3">Discovery Service</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:26;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:75;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:84;182:3">Provides an HTTPS port</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:76;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:85;182:3">Has a keystore with a server certificate</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:27;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:77;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:86;182:3">The certificate needs to be trusted by API Clients</p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:78;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:87;182:3">Has a truststore that contains certificates needed to trust API Services</p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:79;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:88;182:3">API Service</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:28;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:80;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:89;182:3">Provides an HTTPS port</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:81;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:90;182:3">Has a keystore with a server and client certificate</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:29;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:82;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:91;182:3">The server certificate needs to be trusted by GW</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:83;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:92;182:3">The client certificate needs to be trusted by DS</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:84;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:93;182:3">The client and server certificates can be the same</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:85;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:94;182:3">These certificates do not need to be trusted by anyone else</p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:86;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:95;182:3">Has a truststore that contains certificate(s) needed to trust the API Gateway and Discovery Service</p></li></ul></li></ul></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="authentication-1" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:8;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:8;182:3">Authentication</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:8;182:3"><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:30;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:87;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:96;182:3">API Gateway</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:31;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:88;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:97;182:3">API Gateway currently does not handle authentication. Requests are sent to the API services that need to handle authentication</p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:89;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:98;182:3">API Catalog</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:32;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:90;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:99;182:3">API Catalog is accessed by users and it needs to be protected by a login</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:91;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:100;182:3">This is done via Authentication and Authorization Service</p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:92;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:101;182:3">Discovery Service</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:33;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:93;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:102;182:3">Discovery Service is accessed by API Services</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:94;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:103;182:3">This access (reading information and registration) needs to be protected by a client certificate</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:95;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:104;182:3">Access can be granted to users (administrators) - optional</p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:96;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:105;182:3">API Services</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:34;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:97;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:106;182:3">It is up to the service</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:98;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:107;182:3">It should be using Authentication and Authorization Service for authentication</p></li></ul></li></ul></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="truststores-and-keystores" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:9;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:9;182:3">Truststores and keystores</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:9;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:108;182:3">A <i class="+ topic/ph hi-d/i " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="i:1;182:3">keystore</i> is a repository of security certificates consisting of either authorization certificates or public key certificates with corresponding private keys, used in TLS encryption. A <i class="+ topic/ph hi-d/i " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="i:2;182:3">keystore</i> can be stored in Java specific format (JKS) or use the standard format (PKCS12). The Zowe APIML uses PKCS12 to enable the keystores to be used
by other technologies used in Zowe (Node.js).</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:109;182:3">The APIML local CA:</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:35;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:99;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:110;182:3">Contains local CA certificate and its private key (needs to be store securely)</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:100;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:111;182:3">It is used to sign certificates of services</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:101;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:112;182:3">Its certificate is trusted by API services and clients</p></li></ul><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:113;182:3">The APIML keystore:</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:36;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:102;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:114;182:3">server certificate of GW (with PK) - can be signed by local CA or external CA</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:103;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:115;182:3">server certificate of DS (with PK) - can be signed by local CA</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:104;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:116;182:3">server certificate of AC (with PK) - can be signed by local CA</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:105;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:117;182:3">used by APIML services</p></li></ul><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:118;182:3">The APIML truststore:</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:37;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:106;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:119;182:3">contains local CA public certificate</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:107;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:120;182:3">contains external CA public certificate (optional)</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:108;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:121;182:3">can contain self-signed certificates of API Services that are not signed by local or external CA</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:109;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:122;182:3">used by APIML services</p></li></ul><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:123;182:3">Zowe Core services:</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:38;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:110;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:124;182:3">they can use the same keystore and truststore as APIML for simpler installation and management</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:111;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:125;182:3">or they can have individual stores for higher security</p></li></ul><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:126;182:3">API service keystore (for each service)</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:39;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:112;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:127;182:3">contains server and client certificate signed by local CA</p></li></ul><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:128;182:3">API service truststore (for each service)</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:40;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:113;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:129;182:3">contains local CA and external CA certificates (optional)</p></li></ul></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="client-certificates" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:10;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:10;182:3">Client Certificates</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:10;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:130;182:3">A client certificate is a certificate that is used for validation of the HTTPS client.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:131;182:3">The client certificate of a Discovery Service client can be the same certificate as the server certificate of the services which the Discovery Service client.</p></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="authentication-to-the-discovery-service" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:11;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:11;182:3">Authentication to the Discovery Service</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:11;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:132;182:3">The Discovery Service has two types of users that need to authenticate:</p><ol class="- topic/ol " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ol:1;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:114;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:133;182:3">Administrators and developers who need to login to the homepage of the Discovery Service</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:41;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:115;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:134;182:3">These users need to provide valid user ID and password (currently pre-configured user ID and password, it will be replaced by mainframe security in https://waffle.io/zowe/api-layer/cards/5bd8be8131cd76001dcddd77)</p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:116;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:135;182:3">Services that need to register to the Discovery Service</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:42;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:117;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:136;182:3">These are not users that have user ID and password but other services</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:118;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:137;182:3">They authenticate using client certificate. The client certificate is the same TLS certificate that the service uses for HTTPS communication</p></li></ul></li></ol></body></topic></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="certificate-management-in-zowe-api-mediation-layer" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:12;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:12;182:3">Certificate Management in Zowe API Mediation Layer</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:12;182:3"/><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="running-on-localhost" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:13;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:13;182:3">Running on localhost</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:13;182:3"/><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="how-to-start-apiml-on-localhost-with-full-https" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:14;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:14;182:3">How to start APIML on localhost with full HTTPS</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:14;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:138;182:3">The https://github.com/zowe/api-layer repository already contains pre-generated certificates that can be used to start APIML with HTTPS on your computer. The certificates are not trusted by your browser so can either ignore security warning or generate your own certificates and add them to the truststore of your browser or system.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:139;182:3">The certificates are described in more detail in the https://github.com/zowe/api-layer/blob/https-local-certmgmt-%2372/keystore/README.md.</p></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="certificate-management-script" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:15;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:15;182:3">Certificate management script</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:15;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:140;182:3">Zowe API Mediation layer provides a script that can used on Windows, Mac, Linux, and z/OS
to generate the certificate and keystore for the local CA, API Mediation Layer, and services.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:141;182:3">It is stored in <xref class="- topic/xref " href="https://github.com/zowe/api-layer/blob/master/scripts/apiml_cm.sh" format="sh" scope="external" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:32;182:3">scripts/apiml_cm.sh</xref>.
It is a UNIX shell script that can be executed by Bash or z/OS Shell. For Windows, you need to install Bash, for example by using <xref class="- topic/xref " href="http://cmder.net/" format="html" scope="external" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:33;182:3">cmder</xref>.</p></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="generating-own-certificates-for-localhost" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:16;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:16;182:3">Generating own certificates for localhost</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:16;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:142;182:3">Use the following script in the root of the <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:1;182:3">api-layer</codeph> repository:</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:143;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:2;182:3">scripts/apiml_cm.sh --action setup</codeph></p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:144;182:3">This creates the certificates and keystore for the API Mediation Layer in your current workspace.</p></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="generating-certificate-for-a-new-service-on-localhost" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:17;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:17;182:3">Generating certificate for a new service on localhost</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:17;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:145;182:3">The instructions are described at:
https://github.com/zowe/api-layer/blob/master/keystore/README.md#generating-certificate-for-a-new-service-on-localhost</p></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="add-a-service-with-an-existing-certificate-to-apiml-on-localhost" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:18;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:18;182:3">Add a service with an existing certificate to APIML on localhost</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:18;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:146;182:3">This will be documented during work on the following user story: https://waffle.io/zowe/api-layer/cards/5bd8be80283e09001babbf86</p></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="login-to-discovery-service-on-localhost" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:19;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:19;182:3">Login to Discovery service on localhost</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:19;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:147;182:3">You need to provide a valid client certificate if you want to access Discovery Service on localhost.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:148;182:3">The certificate is stored in the <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:3;182:3">keystore/localhost/localhost.keystore.p12</codeph> keystore.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:149;182:3">Some utilities including HTTPie requires the certificate to be in PEM format. You can find it in <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:4;182:3">keystore/localhost/localhost.pem</codeph>.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:150;182:3">Since the Discovery Service is using HTTPS, your client has also verify the validity of its certificate. This can be done by trusting the local CA certificate which is store at <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:5;182:3">keystore/local_ca/localca.cer</codeph>.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:151;182:3">Example how to access Discovery Service from CLI with full certificate validation:</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:152;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:6;182:3">http --cert=keystore/localhost/localhost.pem --verify=keystore/local_ca/localca.cer -j GET https://localhost:10011/eureka/apps/</codeph></p></body></topic></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="zowe-runtime-on-zos" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:20;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:20;182:3">Zowe runtime on z/OS</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:20;182:3"/><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="certificates-for-zos-installation-from-the-zowe-pax-file" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:21;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:21;182:3">Certificates for z/OS installation from the Zowe PAX file</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:21;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:153;182:3">When you install the Zowe runtime on z/OS from the PAX file following the instructions in <xref class="- topic/xref " href="https://zowe.github.io/docs-site/latest/user-guide/install-zos.html" format="html" scope="external" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:34;182:3">Installing the Zowe runtime on z/OS</xref>, the certificates for the APIML local CA and APIML service are automatically generated.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:154;182:3">They are generated by the certificate management script <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:7;182:3">apiml_cm.sh</codeph> that is installed to <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:8;182:3">$ZOWE_ROOT_DIR/api-mediation/scripts/apiml_cm.sh</codeph>.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:155;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:9;182:3">$ZOWE_ROOT_DIR</codeph> is the directory where you installed the Zowe runtime.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:156;182:3">The certificates are generated to the directory <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:10;182:3">$ZOWE_ROOT_DIR/api-mediation/keystore</codeph>.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:157;182:3">APIML keystore and truststore:</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:43;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:119;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:158;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:11;182:3">$ZOWE_ROOT_DIR/api-mediation/keystore/local/localhost.keystore.p12</codeph></p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:44;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:120;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:159;182:3">used for the HTTPS servers</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:121;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:160;182:3">contains the APIML server certificate signed by the local CA and private key for the server</p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:122;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:161;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:12;182:3">$ZOWE_ROOT_DIR/api-mediation/keystore/local/localhost.truststore.p12</codeph></p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:45;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:123;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:162;182:3">use to validate trust when communicating with the services that are registered to the APIML</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:124;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:163;182:3">contains the root certificate of the local CA (not the server certificate)</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:125;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:164;182:3">contains the local CA public certificate</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:126;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:165;182:3">can contain additional certificate to trust services that are not signed by local CA</p></li></ul></li></ul><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:166;182:3">APIML key and truststores needs be accessible by the user ID that executes the Zowe runtime.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:167;182:3">Local CA:</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:46;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:127;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:168;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:13;182:3">$ZOWE_ROOT_DIR/api-mediation/keystoree/local_ca/localca.cer</codeph></p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:47;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:128;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:169;182:3">public certificate of local CA</p></li></ul></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:129;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:170;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:14;182:3">$ZOWE_ROOT_DIR/api-mediation/keystore/local_ca/localca.keystore.p12</codeph></p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:48;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:130;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:171;182:3">private key of the local CA</p></li></ul></li></ul><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:172;182:3">Local CA keystore can be accessible only by the user that is installing and managing the Zowe runtime.</p></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="import-the-local-ca-certificate-to-your-browser" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:22;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:22;182:3">Import the local CA certificate to your browser</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:22;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:173;182:3">The local CA certificate is not trusted outside of the API Mediation Layer by default.
You need to add it to the truststore of the REST API clients and to your browser.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:174;182:3">The public certificate in the <xref class="- topic/xref " href="https://en.wikipedia.org/wiki/Privacy-Enhanced_Mail" format="html" scope="external" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:35;182:3">PEM format</xref> is stored at <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:15;182:3">$ZOWE_ROOT_DIR/api-mediation/keystore/local_ca/localca.cer</codeph> where <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:16;182:3">$ZOWE_ROOT_DIR</codeph>  is the directory that was used for the Zowe runtime during installation.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:175;182:3">It is stored in UTF-8 encoding so you need to transfer it as a binary file. Since this is certificate that your browser is going to trust, it is recommended to use a secure connection for transfer.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:176;182:3">The recommended method is to use <xref class="- topic/xref " href="https://github.com/zowe/zowe-cli#zowe-cli--" format="html" scope="external" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:36;182:3">Zowe CLI</xref>:</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:177;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:17;182:3">zowe zos-files download uss-file --binary $ZOWE_ROOT_DIR/api-mediation/keystore/local_ca/localca.cer</codeph></p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:178;182:3">Alternatively, you can use <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:18;182:3">sftp</codeph>:</p><codeblock class="+ topic/pre pr-d/codeblock " xml:space="preserve" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeblock:1;182:3">sftp &lt;system&gt;
get $ZOWE_ROOT_DIR/api-mediation/keystore/local_ca/localca.cer</codeblock><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:179;182:3">Verify that the file has been transferred correctly. Open it and you should see something like:</p><codeblock class="+ topic/pre pr-d/codeblock " xml:space="preserve" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeblock:2;182:3">-----BEGIN CERTIFICATE-----
...
-----END CERTIFICATE-----</codeblock><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:180;182:3">Then you need to import the certificate to your root certificate store and trust it.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:181;182:3">For <b class="+ topic/ph hi-d/b " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="b:1;182:3">Windows</b>, you can run the following command:</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:182;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:19;182:3">certutil -enterprise -f -v -AddStore "Root" localca.cer</codeph></p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:183;182:3">You have to open the terminal as administrator. This will install the certificate to the Trusted Root Certification Authorities.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:184;182:3">If you're using <b class="+ topic/ph hi-d/b " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="b:2;182:3">macOS</b>, you can run the following command:</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:185;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:20;182:3">$ sudo security add-trusted-cert -d -r trustRoot -k /Library/Keychains/System.keychain localca.cer</codeph></p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:186;182:3"><b class="+ topic/ph hi-d/b " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="b:3;182:3">Firefox</b> uses its own certificate truststore. You can manually import your root certificate via the Firefox settings, or force Firefox to use the Windows truststore:</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:187;182:3">Create a new Javascript file firefox-windows-truststore.js at <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:21;182:3">C:\Program Files (x86)\Mozilla Firefox\defaults\pref</codeph> with the following content:</p><codeblock class="+ topic/pre pr-d/codeblock " xml:space="preserve" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeblock:3;182:3">/* Enable experimental Windows truststore support */
pref("security.enterprise_roots.enabled", true);</codeblock></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="generating-keystore-and-truststore-for-a-new-service-on-zos" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:23;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:23;182:3">Generating keystore and truststore for a new service on z/OS</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:23;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:188;182:3">You can generate keystore and truststore for a new service by calling the <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:22;182:3">apiml_cm.sh</codeph> script in the directory with API Mediation Layer:</p><codeblock class="+ topic/pre pr-d/codeblock " xml:space="preserve" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeblock:4;182:3">cd $ZOWE_ROOT_DIR/api-mediation
scripts/apiml_cm.sh --action new-service --service-alias &lt;alias&gt; --service-ext &lt;ext&gt; \
--service-keystore &lt;keystore_path&gt; --service-truststore &lt;truststore_path&gt; \
--service-dname &lt;dname&gt; --service-password &lt;password&gt; --service-validity &lt;days&gt; \
--local-ca-filename $ZOWE_ROOT_DIR/api-mediation/keystore/local_ca/localca </codeblock><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:189;182:3">The <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:23;182:3">service-alias</codeph> is an unique string to identify the key entry. All keystore entries (key and trusted certificate entries) are accessed via unique aliases. Since the keystore will have only one certificate, you can omit this parameter and use the default value <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:24;182:3">localhost</codeph>.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:190;182:3">The <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:25;182:3">service-keystore</codeph> is a repository of security certificates plus corresponding private keys. The <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:26;182:3">&lt;keystore_path&gt;</codeph> is the path excluding the extension to the keystore that will be generated. It can be an absolute path or a path relative to the current working directory. The key store is generated in PKCS12 format with <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:27;182:3">.p12</codeph> extension. It should be path in an existing directory where your service expects the keystore. For example: <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:28;182:3">/opt/myservice/keystore/service.keystore</codeph>.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:191;182:3">The <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:29;182:3">service-truststore</codeph> contains certificates from other parties that you expect to communicate with, or from Certificate Authorities that you trust to identify other parties. The <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:30;182:3">&lt;truststore_path&gt;</codeph> is the path excluding the extension to the trust store that will be generated. It can be an absolute path or a path relative to the current working directory. The truststore is generated in PKCS12 format.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:192;182:3">The <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:31;182:3">service-ext</codeph> specifies the X.509 extension that should be the Subject Alternate Name (SAN). The SAN has contain host names that are used to access the service. You need specify the same hostname that is used by the service during API Mediation Layer registration. For example:</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:193;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:32;182:3">"SAN=dns:localhost.localdomain,dns:localhost,ip:127.0.0.1"</codeph></p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:194;182:3"><i class="+ topic/ph hi-d/i " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="i:3;182:3">Note:</i> For more details about SAN, see section <i class="+ topic/ph hi-d/i " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="i:4;182:3">SAN or SubjectAlternativeName</i> at <xref class="- topic/xref " href="https://www.ibm.com/support/knowledgecenter/en/SSYKE2_8.0.0/com.ibm.java.security.component.80.doc/security-component/keytoolDocs/commonoptions.html" format="html" scope="external" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:37;182:3">Java Keytool - Common Options</xref>.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:195;182:3">The <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:33;182:3">service-dname</codeph> is the X.509 Distinguished Name and is used to identify entities, such as those which are named by the subject and issuer (signer) fields of X.509 certificates. For example:</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:196;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:34;182:3">"CN=Zowe Service, OU=API Mediation Layer, O=Zowe Sample, L=Prague, S=Prague, C=CZ"</codeph></p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:197;182:3">The <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:35;182:3">service-validity</codeph> is the number of days after that the certificate will expire.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:198;182:3">The <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:36;182:3">service-password</codeph> is the keystore password. The purpose of the password is the integrity check. The access protection for the keystore and keystore need to be achieved by making them accessible only by the ZOVESVR user ID and the system administrator.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:199;182:3">The <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:37;182:3">local-ca-filename</codeph> is the path to the keystore that is used to sign your new certificate with the local CA private key. If you an in the <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:38;182:3">$ZOWE_RUNTIME/api-mediation-directory</codeph>, you can omit this parameter. It should point to the <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:39;182:3">$ZOWE_ROOT_DIR/api-mediation/keystore/local_ca/localca</codeph>.</p></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="add-a-service-with-an-existing-certificate-to-apiml-on-zos" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:24;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:24;182:3">Add a service with an existing certificate to APIML on z/OS</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:24;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:200;182:3">The API Mediation Layer needs to validate the certificate of each service that it accessed by the API Mediation Layer. The API Mediation Layer needs to validate the full certificate chain. It usually means that:</p><ol class="- topic/ol " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ol:2;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:131;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:201;182:3">You need to import the public certificate of the root CA that has signed the certificate of the service to the APIML truststore.</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:132;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:202;182:3">or your service needs to have its own certificate and all intermediate CA certificates (if it was signed by intermediate CA) in its keystore.</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:49;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:133;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:203;182:3">If the service does not provide intermediate CA certificates to the APIML then the validation fails. This can be circumvented by importing the intermediate CA certificates to the APIML truststore.</p></li></ul></li></ol><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:204;182:3">You can import a public certificate to the APIML truststore by calling in the directory with API Mediation Layer:</p><codeblock class="+ topic/pre pr-d/codeblock " xml:space="preserve" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeblock:5;182:3">cd $ZOWE_ROOT_DIR/api-mediation
scripts/apiml_cm.sh --action trust --certificate &lt;path-to-certificate-in-PEM-format&gt; --alias &lt;alias&gt;</codeblock></body><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="what-happens-if-the-service-is-not-trusted" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:25;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:25;182:3">What happens if the service is not trusted</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:25;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:205;182:3">If you access a service that is not trusted, for example, by issuing a REST API request to it:</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:206;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:40;182:3">http --verify=keystore/local_ca/localca.cer GET https://&lt;gatewayHost&gt;:&lt;port&gt;&lt;/port&gt;/api/v1/&lt;untrustedService&gt;/greeting</codeph></p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:207;182:3">You will get a similar response:</p><codeblock class="+ topic/pre pr-d/codeblock " xml:space="preserve" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeblock:6;182:3">    HTTP/1.1 502
    Content-Type: application/json;charset=UTF-8

    {
        "messages": [
            {
                "messageContent": "The certificate of the service accessed by HTTPS using URI '/api/v1/&lt;untrustedService&gt;/greeting' is not trusted by the API Gateway: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target",
                "messageKey": "apiml.common.tlsError",
                "messageNumber": "AML0105",
                "messageType": "ERROR"
            }
        ]
    }</codeblock><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:208;182:3">The response has HTTP status code <xref class="- topic/xref " href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502" format="html" scope="external" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="xref:38;182:3">502 Bad Gateway</xref> and a JSON response in the standardized format for error messages. The message has key <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:41;182:3">apiml.common.tlsError</codeph> and message number <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:42;182:3">AML0105</codeph> and its content explains details about the message.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:209;182:3">If you see this message, you need to import the certificate of your service or the CA that has signed it to the truststore API Mediation Layer as described above.</p></body></topic></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="trust-zosmf-certificate" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:26;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:26;182:3">Trust z/OSMF certificate</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:26;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:210;182:3">The Zowe installation script tries to import z/OSMF public certificates to the truststore of API Mediation Layer automatically.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:211;182:3">This requires the user ID that is doing the installation to be able to read the z/OSMF keyring.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:212;182:3">If it is not possible, you will see following error message:</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:213;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:43;182:3">WARNING: z/OSMF is not trusted by the API Mediation Layer.</codeph></p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:214;182:3">You can add z/OSMF to the truststore manually as a user that have access right to read the z/OSMF keyring or is a superuser.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:215;182:3">To find the name of the z/OSMF keyring issue:</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:216;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:44;182:3">cat /var/zosmf/configuration/servers/zosmfServer/bootstrap.properties | grep izu.ssl.key.store.saf.keyring</codeph></p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:217;182:3">This will return a response in the following format:</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:218;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:45;182:3">izu.ssl.key.store.saf.keyring=IZUKeyring.IZUDFLT</codeph></p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:219;182:3">You need to run following commands as superuser to import z/OSMF certificates:</p><codeblock class="+ topic/pre pr-d/codeblock " xml:space="preserve" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeblock:7;182:3">    su
    cd $ZOWE_RUNTIME/api-mediation
    scripts/apiml_cm.sh --action trust-zosmf --zosmf-keyring IZUKeyring.IZUDFLT --zosmf-userid IZUSVR</codeblock><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:220;182:3">If the import is successful, you need to restart Zowe server to make the changes effective.</p></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="disabling-certificate-validation" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:27;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:27;182:3">Disabling certificate validation</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:27;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:221;182:3">If you want to try out the Zowe without setting up the certificates, you can disable the validation of the TLS/SSL certificates by the API Mediation layer.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:222;182:3">This can be done updating following property:</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:223;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:46;182:3">-Dapiml.security.verifySslCertificatesOfServices=false</codeph></p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:224;182:3">in following shell scripts:</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="ul:50;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:134;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:225;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:47;182:3">$ZOWE_RUNTIME/api-mediation/scripts/api-mediation-start-catalog.sh</codeph></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:135;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:226;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:48;182:3">$ZOWE_RUNTIME/api-mediation/scripts/api-mediation-start-discovery.sh</codeph></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="li:136;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:227;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="codeph:49;182:3">$ZOWE_RUNTIME/api-mediation/scripts/api-mediation-start-gateway.sh</codeph></p></li></ul></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="use-an-existing-server-certificate-for-api-mediation-layer" xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="topic:28;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="title:28;182:3">Use an existing server certificate for API Mediation Layer</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="body:28;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-apiml/api-mediation-security.md" xtrc="p:228;182:3">This will be documented during work on the following user story:
https://github.com/zowe/api-layer/issues/91</p></body></topic></topic></topic></topic>