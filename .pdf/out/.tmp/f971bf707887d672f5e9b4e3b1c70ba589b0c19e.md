<?xml version="1.0" encoding="UTF-8"?><?workdir /opt/dita-ot/out/.tmp?><?workdir-uri file:/opt/dita-ot/out/.tmp/?><?path2project ../../?><?path2project-uri ../../?><?path2rootmap-uri ../../?><topic xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" xmlns:dita-ot="http://dita-ot.sourceforge.net/ns/201007/dita-ot" class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="developing-a-new-plug-in" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="topic:1;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="title:1;182:3">Developing a new plug-in</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="body:1;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:1;182:3">Before you begin this tutorial, make sure that you completed the <xref class="- topic/xref " href="21bd295a375d19fe723dbf695e253bdf16724f0d.md" dita-ot:orig-format="markdown" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="xref:1;182:3">Extending an existing plug-in</xref> tutorial.</p></body><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="overview" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="topic:2;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="title:2;182:3">Overview</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="body:2;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:2;182:3">This tutorial demonstrates how to create a brand new Zowe CLI plug-in that uses Zowe CLI Node.js programmatic APIs.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:3;182:3">At the end of this tutorial, you will have created a data set diff utility plug-in for Zowe CLI, from which you can pipe
your plugin's output to a third-party utility for a side-by-side diff of data set member contents.</p><image class="- topic/image " href="53b0955f3f27871374e9c0403a1c64b755905898.png" placement="break" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="image:1;182:3"><alt class="- topic/alt " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="alt:1;182:3">Side by Side Diff</alt></image><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:4;182:3">Completed source for this tutorial can be found on the <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:1;182:3">develop-a-plugin</codeph> branch of the zowe-cli-sample-plugin repository.</p></body><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="cloning-the-sample-plug-in-source" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="topic:3;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="title:3;182:3">Cloning the sample plug-in source</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="body:3;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:5;182:3">Clone the sample repo, delete the irrelevant source, and create a brand new plug-in. Follow these steps:</p><ol class="- topic/ol " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="ol:1;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="li:1;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:6;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:2;182:3">cd</codeph> into your <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:3;182:3">zowe-tutorial</codeph> folder</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="li:2;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:7;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:4;182:3">git clone https://github.com/zowe/zowe-cli-sample-plugin files-util</codeph></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="li:3;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:8;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:5;182:3">cd files-util</codeph></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="li:4;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:9;182:3">Delete the <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:6;182:3">.git</codeph> (hidden) folder.</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="li:5;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:10;182:3">Delete all content within the <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:7;182:3">src/api</codeph>, <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:8;182:3">src/cli</codeph>, and <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:9;182:3">docs</codeph> folders.</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="li:6;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:11;182:3">Delete all content within the <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:10;182:3">__tests__/__system__/api</codeph>, <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:11;182:3">__tests__/__system__/cli</codeph>, <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:12;182:3">__tests__/api</codeph>, and <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:13;182:3">__tests__/cli</codeph> folders</p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="li:7;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:12;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:14;182:3">git init</codeph></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="li:8;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:13;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:15;182:3">git add .</codeph></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="li:9;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:14;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:16;182:3">git commit -m "initial"</codeph></p></li></ol></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="changing-packagejson" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="topic:4;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="title:4;182:3">Changing package.json</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="body:4;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:15;182:3">Use a unique <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:17;182:3">npm</codeph> name for your plugin. Change <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:18;182:3">package.json</codeph> name field as follows:</p><codeblock class="+ topic/pre pr-d/codeblock " xml:space="preserve" outputclass="typescript" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeblock:1;182:3">  "name": "@brightside/files-util",</codeblock><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:16;182:3">Issue the command <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:19;182:3">npm install</codeph> against the local repository.</p></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="adjusting-imperative-cli-framework-configuration" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="topic:5;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="title:5;182:3">Adjusting Imperative CLI Framework configuration</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="body:5;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:17;182:3">Change <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:20;182:3">imperative.ts</codeph> to contain the following:</p><codeblock class="+ topic/pre pr-d/codeblock " xml:space="preserve" outputclass="typescript" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeblock:2;182:3">import { IImperativeConfig } from "@brightside/imperative";

const config: IImperativeConfig = {
    commandModuleGlobs: ["**/cli/*/*.definition!(.d).*s"],
    rootCommandDescription: "Files utilty plugin for Zowe CLI",
    envVariablePrefix: "FILES_UTIL_PLUGIN",
    defaultHome: "~/.files_util_plugin",
    productDisplayName: "Files Util Plugin",
    name: "files-util"
};

export = config;</codeblock><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:18;182:3">Here we adjusted the description and other fields in the <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:21;182:3">imperative</codeph> JSON configuration to be relevant to this plug-in.</p></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="adding-third-party-packages" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="topic:6;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="title:6;182:3">Adding third-party packages</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="body:6;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:19;182:3">We'll use the following packages to create a programmatic API:</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="ul:1;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="li:10;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:20;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:22;182:3">npm install --save diff</codeph></p></li><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="li:11;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:21;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:23;182:3">npm install -D @types/diff</codeph></p></li></ul></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="creating-a-nodejs-programmatic-api" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="topic:7;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="title:7;182:3">Creating a Node.js programmatic API</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="body:7;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:22;182:3">In <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:24;182:3">files-util/src/api</codeph>, create a file named <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:25;182:3">DataSetDiff.ts</codeph>. The content of <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:26;182:3">DataSetDiff.ts</codeph> should be the following:</p><codeblock class="+ topic/pre pr-d/codeblock " xml:space="preserve" outputclass="typescript" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeblock:3;182:3">import { AbstractSession } from "@brightside/imperative";
import { Download, IDownloadOptions, IZosFilesResponse } from "@brightside/core";
import * as diff from "diff";
import { readFileSync } from "fs";

export class DataSetDiff {

    public static async diff(session: AbstractSession, oldDataSet: string, newDataSet: string) {

        let error;
        let response: IZosFilesResponse;

        const options: IDownloadOptions = {
            extension: "dat",
        };

        try {
            response = await Download.dataSet(session, oldDataSet, options);
        } catch (err) {
            error = "oldDataSet: " + err;
            throw error;
        }

        try {
            response = await Download.dataSet(session, newDataSet, options);
        } catch (err) {
            error = "newDataSet: " + err;
            throw error;
        }

        const regex = /\.|\(/gi; // Replace . and ( with /
        const regex2 = /\)/gi;   // Replace ) with .

        // convert the old data set name to use as a path/file
        let file = oldDataSet.replace(regex, "/");
        file = file.replace(regex2, ".") + "dat";
        // Load the downloaded contents of 'oldDataSet'
        const oldContent = readFileSync(`${file}`).toString();

        // convert the new data set name to use as a path/file
        file = newDataSet.replace(regex, "/");
        file = file.replace(regex2, ".") + "dat";
        // Load the downloaded contents of 'oldDataSet'
        const newContent = readFileSync(`${file}`).toString();

        return diff.createTwoFilesPatch(oldDataSet, newDataSet, oldContent, newContent, "Old", "New");
    }
}</codeblock></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="exporting-your-api" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="topic:8;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="title:8;182:3">Exporting your API</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="body:8;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:23;182:3">In <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:27;182:3">files-util/src</codeph>, change <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:28;182:3">index.ts</codeph> to contain the following:</p><codeblock class="+ topic/pre pr-d/codeblock " xml:space="preserve" outputclass="typescript" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeblock:4;182:3">export * from "./api/DataSetDiff";</codeblock></body></topic></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="checkpoint" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="topic:9;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="title:9;182:3">Checkpoint</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="body:9;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:24;182:3">At this point, you should be able to rebuild the plug-in without errors via <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:29;182:3">npm run build</codeph>. You included third party dependencies, created a programmatic API, and customized this new plug-in project. Next, you'll define the command to invoke your programmatic API.</p></body><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="defining-commands" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="topic:10;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="title:10;182:3">Defining commands</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="body:10;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:25;182:3">In <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:30;182:3">files-util/src/cli</codeph>, create a folder named <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:31;182:3">diff</codeph>. Within the <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:32;182:3">diff</codeph> folder, create a file <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:33;182:3">Diff.definition.ts</codeph>. Its content should be as follows:</p><codeblock class="+ topic/pre pr-d/codeblock " xml:space="preserve" outputclass="typescript" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeblock:5;182:3">import { ICommandDefinition } from "@brightside/imperative";
import { DataSetsDefinition } from "./data-sets/DataSets.definition";
const IssueDefinition: ICommandDefinition = {
    name: "diff",
    summary: "Diff two data sets content",
    description: "Uses open source diff packages to diff two data sets content",
    type: "group",
    children: [DataSetsDefinition]
};

export = IssueDefinition;</codeblock><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:26;182:3">Also within the <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:34;182:3">diff</codeph> folder, create a folder named <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:35;182:3">data-sets</codeph>. Within the <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:36;182:3">data-sets</codeph> folder create <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:37;182:3">DataSets.definition.ts</codeph> and <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:38;182:3">DataSets.handler.ts</codeph>.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:27;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:39;182:3">DataSets.definition.ts</codeph> should contain:</p><codeblock class="+ topic/pre pr-d/codeblock " xml:space="preserve" outputclass="typescript" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeblock:6;182:3">import { ICommandDefinition } from "@brightside/imperative";

export const DataSetsDefinition: ICommandDefinition = {
    name: "data-sets",
    aliases: ["ds"],
    summary: "data sets to diff",
    description: "diff the first data set with the second",
    type: "command",
    handler: __dirname + "/DataSets.handler",
    positionals: [
        {
            name: "oldDataSet",
            description: "The old data set",
            type: "string"
        },
        {
            name: "newDataSet",
            description: "The new data set",
            type: "string"
        }
    ],
    profile: {
        required: ["zosmf"]
    }
};</codeblock><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:28;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:40;182:3">DataSets.handler.ts</codeph> should contain the following:</p><codeblock class="+ topic/pre pr-d/codeblock " xml:space="preserve" outputclass="typescript" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeblock:7;182:3">import { ICommandHandler, IHandlerParameters, TextUtils, Session } from "@brightside/imperative";
import { DataSetDiff } from "../../../api/DataSetDiff";

export default class DataSetsDiffHandler implements ICommandHandler {
    public async process(params: IHandlerParameters): Promise&lt;void&gt; {

        const profile = params.profiles.get("zosmf");
        const session = new Session({
            type: "basic",
            hostname: profile.host,
            port: profile.port,
            user: profile.user,
            password: profile.pass,
            base64EncodedAuth: profile.auth,
            rejectUnauthorized: profile.rejectUnauthorized,
        });
        const resp = await DataSetDiff.diff(session, params.arguments.oldDataSet, params.arguments.newDataSet);
        params.response.console.log(resp);
    }
}
</codeblock></body></topic></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="trying-your-command" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="topic:11;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="title:11;182:3">Trying your command</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="body:11;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:29;182:3">Be sure to build your plug-in via <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:41;182:3">npm run build</codeph>.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:30;182:3">Install your plug-in into Zowe CLI via <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:42;182:3">zowe plugins install</codeph>.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:31;182:3">Issue the following command. Replace the data set names with valid mainframe data set names on your system:</p><image class="- topic/image " href="e2b1455e3ec40bc2f08b26252887890fb55d3722.png" placement="break" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="image:2;182:3"><alt class="- topic/alt " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="alt:2;182:3">Pipe Output</alt></image><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:32;182:3">The raw diff output is displayed as a command response:</p><image class="- topic/image " href="8e9df7695300b33c1c3e00f89318f4e05739182e.png" placement="break" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="image:3;182:3"><alt class="- topic/alt " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="alt:3;182:3">Raw Diff Output</alt></image></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="bringing-together-new-tools" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="topic:12;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="title:12;182:3">Bringing together new tools!</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="body:12;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:33;182:3">The advantage of Zowe CLI and of the CLI approach in mainframe development is that it allows for combining different developer tools for new and interesting uses.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:34;182:3"><xref class="- topic/xref " href="https://diff2html.xyz/" format="html" scope="external" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="xref:2;182:3">diff2html</xref> is a free tool to generate HTML side-by-side diffs to help see actual differences in diff output.</p><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:35;182:3">Install the <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:43;182:3">diff2html</codeph> CLI via <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:44;182:3">npm install -g diff2html-cli</codeph>. Then, pipe your Zowe CL plugin's output into <codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:45;182:3">diff2html</codeph> to generate diff HTML and launch a web browser that contains the content in the screen shot at the <xref class="- topic/xref " href="#overview" dita-ot:orig-format="html" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="xref:3;182:3">top of this file</xref>.</p><ul class="- topic/ul " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="ul:2;182:3"><li class="- topic/li " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="li:12;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:36;182:3"><codeph class="+ topic/ph pr-d/codeph " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="codeph:46;182:3">zowe files-util diff data-sets "kelda16.work.jcl(iefbr14)" "kelda16.work.jcl(iefbr15)" | diff2html -i stdin</codeph></p></li></ul></body></topic><topic class="- topic/topic " ditaarch:DITAArchVersion="1.2" domains="(topic hi-d) (topic ut-d) (topic indexing-d) (topic hazard-d) (topic abbrev-d) (topic pr-d) (topic sw-d) (topic ui-d)" id="next-steps" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="topic:13;182:3"><title class="- topic/title " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="title:13;182:3">Next steps</title><body class="- topic/body " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="body:13;182:3"><p class="- topic/p " xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="p:37;182:3">Try the <xref class="- topic/xref " href="8efbfac5670862a1078c38de2b2888f972044265.md" dita-ot:orig-format="markdown" format="dita" xtrf="file:/opt/dita-ot/data/extend/extend-cli/cli-developing-a-plugin.md" xtrc="xref:4;182:3">Implementing profiles in a plug-in</xref> tutorial to learn about using profiles with your plug-in.</p></body></topic></topic>